(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{456:function(_,v,t){"use strict";t.r(v);var d=t(62),e=Object(d.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"数据库表设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库表设计"}},[_._v("#")]),_._v(" 数据库表设计")]),_._v(" "),t("p",[t("code",[_._v("Gable")]),_._v(" 中的大多数数据表，都会有些基础字段记录表的数据的变更。相关字段如下")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名")]),_._v(" "),t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("注释")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("tenant_id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("租户Id,为多租户做准备，有可能用不到")])]),_._v(" "),t("tr",[t("td",[_._v("created_by")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("记录谁创建了数据")])]),_._v(" "),t("tr",[t("td",[_._v("date_created")]),_._v(" "),t("td",[t("code",[_._v("timestamp")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("数据的创建时间，只会在数据创建的时候被赋值")])]),_._v(" "),t("tr",[t("td",[_._v("modified_by")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("记录谁修改了数据")])]),_._v(" "),t("tr",[t("td",[_._v("date_modified")]),_._v(" "),t("td",[t("code",[_._v("timestamp")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("数据的更新时间，会在数据更新时更新")])]),_._v(" "),t("tr",[t("td",[_._v("date_modified")]),_._v(" "),t("td",[t("code",[_._v("timestamp")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("数据的更新时间，会在数据更新时更新")])]),_._v(" "),t("tr",[t("td",[_._v("operationUrl")]),_._v(" "),t("td",[t("code",[_._v("varchar(64)")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("记录创建这条数据或者修改这条数据的 "),t("code",[_._v("Http")]),_._v(" 请求的 "),t("code",[_._v("url")])])]),_._v(" "),t("tr",[t("td",[_._v("data_from")]),_._v(" "),t("td",[t("code",[_._v("varchar(32)")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("记录数据来源,值来自业务层的约定")])])])]),_._v(" "),t("h2",{attrs:{id:"sec-user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sec-user"}},[_._v("#")]),_._v(" sec_user")]),_._v(" "),t("p",[t("strong",[_._v("用户表")]),_._v("，该表包含了基础字段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名")]),_._v(" "),t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("注释")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("主键id,使用 sequence名："),t("code",[_._v("user_sequence")])])]),_._v(" "),t("tr",[t("td",[_._v("username")]),_._v(" "),t("td",[t("code",[_._v("varchar(25)")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("用户名")])]),_._v(" "),t("tr",[t("td",[_._v("password")]),_._v(" "),t("td",[t("code",[_._v("varchar(64)")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("密码，加密后的字符串")])]),_._v(" "),t("tr",[t("td",[_._v("email")]),_._v(" "),t("td",[t("code",[_._v("varchar(38)")])]),_._v(" "),t("td",[t("code",[_._v("not null")])]),_._v(" "),t("td",[_._v("邮箱，用来登录")])]),_._v(" "),t("tr",[t("td",[_._v("avatar")]),_._v(" "),t("td",[t("code",[_._v("varchar(38)")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("头像地址")])]),_._v(" "),t("tr",[t("td",[_._v("account_non_expired")]),_._v(" "),t("td",[t("code",[_._v("bool")])]),_._v(" "),t("td",[t("code",[_._v("true")])]),_._v(" "),t("td",[_._v("账户是否过期（满足SpringSecurity配置）")])]),_._v(" "),t("tr",[t("td",[_._v("account_non_locked")]),_._v(" "),t("td",[t("code",[_._v("bool")])]),_._v(" "),t("td",[t("code",[_._v("true")])]),_._v(" "),t("td",[_._v("账户是否被锁定（满足SpringSecurity配置）")])]),_._v(" "),t("tr",[t("td",[_._v("credentials_non_expired")]),_._v(" "),t("td",[t("code",[_._v("bool")])]),_._v(" "),t("td",[t("code",[_._v("true")])]),_._v(" "),t("td",[_._v("密码是否过期（满足SpringSecurity配置）")])]),_._v(" "),t("tr",[t("td",[_._v("enabled")]),_._v(" "),t("td",[t("code",[_._v("bool")])]),_._v(" "),t("td",[t("code",[_._v("true")])]),_._v(" "),t("td",[_._v("是否可用（满足SpringSecurity配置）")])])])]),_._v(" "),t("p",[_._v("该表 "),t("code",[_._v("email")]),_._v(" 字段是唯一索引。")]),_._v(" "),t("h2",{attrs:{id:"sec-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sec-role"}},[_._v("#")]),_._v(" sec_role")]),_._v(" "),t("p",[t("strong",[_._v("角色表")]),_._v("，该表包含了基础字段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名")]),_._v(" "),t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("注释")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("主键id,使用 sequence名："),t("code",[_._v("role_sequence")])])]),_._v(" "),t("tr",[t("td",[_._v("name")]),_._v(" "),t("td",[t("code",[_._v("varchar(16)")])]),_._v(" "),t("td",[t("code",[_._v("not null unique")])]),_._v(" "),t("td",[_._v("角色名")])]),_._v(" "),t("tr",[t("td",[_._v("admin_user")]),_._v(" "),t("td",[t("code",[_._v("bool")])]),_._v(" "),t("td",[t("code",[_._v("false")])]),_._v(" "),t("td",[_._v("角色类型，"),t("code",[_._v("true")]),_._v("为超级管理员，"),t("code",[_._v("false")]),_._v("为普通角色")])])])]),_._v(" "),t("h2",{attrs:{id:"sec-role-permission-relation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sec-role-permission-relation"}},[_._v("#")]),_._v(" sec_role_permission_relation")]),_._v(" "),t("p",[t("strong",[_._v("角色权限关系表")]),_._v("，该表为关系表，不包含基础字段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名")]),_._v(" "),t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("注释")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("主键id,使用 sequence名："),t("code",[_._v("role_perm_relation_sequence")])])]),_._v(" "),t("tr",[t("td",[_._v("role_id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("角色id")])]),_._v(" "),t("tr",[t("td",[_._v("permission_code")]),_._v(" "),t("td",[t("code",[_._v("varchar(16)")])]),_._v(" "),t("td",[t("code",[_._v("null")])]),_._v(" "),t("td",[_._v("权限代码")])])])]),_._v(" "),t("p",[_._v("该表 "),t("code",[_._v("role_id")]),_._v(" 和 "),t("code",[_._v("permission_code")]),_._v(" 存在一个唯一的索引。")]),_._v(" "),t("p",[t("code",[_._v("permission_code")]),_._v(" 的定义在枚举类中，代码位置: "),t("code",[_._v("org.adp.gable.security.PermissionType")])]),_._v(" "),t("h2",{attrs:{id:"sec-role-user-relation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sec-role-user-relation"}},[_._v("#")]),_._v(" sec_role_user_relation")]),_._v(" "),t("p",[t("strong",[_._v("用户角色关系表")]),_._v("，该表为关系表，不包含基础字段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名")]),_._v(" "),t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("默认值")]),_._v(" "),t("th",[_._v("注释")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("主键id,使用 sequence名："),t("code",[_._v("role_user_relation_sequence")])])]),_._v(" "),t("tr",[t("td",[_._v("role_id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("角色id")])]),_._v(" "),t("tr",[t("td",[_._v("user_id")]),_._v(" "),t("td",[t("code",[_._v("long")])]),_._v(" "),t("td",[t("code",[_._v("0")])]),_._v(" "),t("td",[_._v("用户id")])])])]),_._v(" "),t("p",[_._v("该表 "),t("code",[_._v("role_id")]),_._v(" 和 "),t("code",[_._v("user_id")]),_._v(" 存在一个唯一的索引。")])])}),[],!1,null,null,null);v.default=e.exports}}]);