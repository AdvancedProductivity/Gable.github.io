(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{457:function(t,s,a){"use strict";a.r(s);var n=a(62),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[t._v("#")]),t._v(" 文档")]),t._v(" "),a("h2",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),a("p",[t._v("很多用户可能对现在比较流行的文档以及编辑器技术不太了解。")]),t._v(" "),a("p",[t._v("当前比较主流的做法是，用 "),a("code",[t._v("Json")]),t._v(" 描述一篇文档。可以这样描述：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"documentName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试文档"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"blocks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"h1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这是标题"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"paragraph"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这是段落"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("然后编辑器，在拿到了上面描述文档的"),a("code",[t._v("Json")]),t._v("之后，就可以将其渲染成这样的结果:")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("这是标题"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("这是段落"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("这就是当前比较流行的编辑器，或者文档技术的本质。业内将其成为 基于 "),a("code",[t._v("块")]),t._v(" 的设计。")]),t._v(" "),a("h2",{attrs:{id:"gable-的尝试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gable-的尝试"}},[t._v("#")]),t._v(" Gable 的尝试")]),t._v(" "),a("p",[t._v("如果我们基于上面的理论，多做一点设计，比如设计一个这样的 "),a("code",[t._v("Json")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"documentName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试文档"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"blocks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"define"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"protocol"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("我们要求，文档编辑器（或者文档渲染引擎）在拿到 "),a("code",[t._v("type")]),t._v(" 值为 "),a("code",[t._v("http")]),t._v(" 的 "),a("code",[t._v("块")]),t._v("时，把界面渲染成这样的效果:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.bmp.ovh/imgs/2022/09/01/8c5f0faa2fbc3c59.png",alt:"界面"}})]),t._v(" "),a("p",[a("strong",[t._v("注意")])]),t._v(" "),a("p",[t._v("这个尝试非常重要，它让我们的文档发生了本质的变化。")]),t._v(" "),a("p",[t._v("原本文档只是传播信息的媒介。而如果我们把执行"),a("code",[t._v("API测试")]),t._v("这样的工具面板放进文档之后")]),t._v(" "),a("p",[t._v("文档就变成了可以提供了服务的工具。")]),t._v(" "),a("p",[t._v("但是这样做不是没有副作用的，因为这样复杂的界面是无法打印到纸张上的。")]),t._v(" "),a("p",[t._v("但是从文档协同的角度来说，这也是值得的。")]),t._v(" "),a("h2",{attrs:{id:"gable-是怎么做的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gable-是怎么做的"}},[t._v("#")]),t._v(" Gable 是怎么做的")]),t._v(" "),a("p",[t._v("我们使用一个开源的库 "),a("a",{attrs:{href:"https://github.com/codex-team/editor.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("editor.js"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("然后，我们把 我们的 Http 执行面板打包成了 "),a("code",[t._v("WebComponent")]),t._v(", 最后使用 "),a("a",{attrs:{href:"https://github.com/codex-team/editor.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("editor.js"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("渲染html节点。")]),t._v(" "),a("p",[t._v("效果图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s3.bmp.ovh/imgs/2022/09/01/fb41fb6770d98b2e.gif",alt:"效果图"}})]),t._v(" "),a("h2",{attrs:{id:"商业畅想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#商业畅想"}},[t._v("#")]),t._v(" 商业畅想")]),t._v(" "),a("p",[t._v("做出一款好用的文档编辑器，是需要实力大量精力的。")]),t._v(" "),a("p",[t._v("我们做的是 API 协作工具，而不是文档系统和编辑器。")]),t._v(" "),a("p",[t._v("直觉告诉我，我应该开放一套 "),a("code",[t._v("API")]),t._v(" UI，然后，让市场上的各大文档产品，集成兼容我们"),a("code",[t._v("Gable")]),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("Gable")]),t._v("单纯负责执行"),a("code",[t._v("API")]),t._v(",如何优雅的渲染文档，交给专业的文档产品会不会是一个更好的选择呢？")]),t._v(" "),a("p",[t._v("这样做的一个优点是，我们可以把精力放在其它协作上，而不用担心文档的功能没有做好而被动。")]),t._v(" "),a("p",[t._v("同时，专业的文档产品的集成，可以帮助我们"),a("code",[t._v("Gable")]),t._v("走的更快。")]),t._v(" "),a("p",[t._v("对于此，有见解的人可以与我交流。")])])}),[],!1,null,null,null);s.default=r.exports}}]);