(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{454:function(t,a,s){"use strict";s.r(a);var e=s(62),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"起步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#起步"}},[t._v("#")]),t._v(" 起步")]),t._v(" "),s("p",[t._v("在程序启动之前，需要先准备一下环境。")]),t._v(" "),s("p",[s("code",[t._v("Gable")]),t._v(" 对所运行的机器没有太多要求，只需要安装一个 JDK8 的环境即可。")]),t._v(" "),s("p",[t._v("如果您下载 JDK 有困难，可以在这里找到CDN版本: "),s("a",{attrs:{href:"https://www.injdk.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.injdk.cn/"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),s("p",[s("code",[t._v("Gable")]),t._v(" 默认是基于当下比较火爆的 "),s("code",[t._v("Postgresql")]),t._v(" 开发，所以在运行程序之前，需要先准备一下数据库相关的环境。")]),t._v(" "),s("p",[t._v("执行以下 "),s("code",[t._v("sql")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 创建数据库 名为 gable")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("database")]),t._v(" gable "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" owner postgres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 创建连接数据库的账号 app 密码 123456 (和代码中的配置对应)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" password "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12345678'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 分配访问权限")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("grant")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("temporary")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("database")]),t._v(" gable "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("p",[t._v("至于其它的数据库表以及索引等，会在程序启动时自动创建。")]),t._v(" "),s("h2",{attrs:{id:"关于测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于测试"}},[t._v("#")]),t._v(" 关于测试")]),t._v(" "),s("p",[t._v("如果你需要运行单元测试的代码，需要额外创建一个数据库 "),s("code",[t._v("gable_test")]),t._v(" 来初始化单元测试的数据。")]),t._v(" "),s("h4",{attrs:{id:"初始化测试数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化测试数据库"}},[t._v("#")]),t._v(" 初始化测试数据库")]),t._v(" "),s("p",[t._v("执行以下 "),s("code",[t._v("sql")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 创建数据库 名为 gable_test")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("database")]),t._v(" gable_test "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" owner postgres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 分配访问权限")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("grant")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("temporary")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("database")]),t._v(" gable_test "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("p",[t._v("正式环境中,"),s("code",[t._v("Gable")]),t._v(" 使用 "),s("code",[t._v("Flyway")]),t._v(" 管理不同版本之间的数据库迁移，而测试环境中禁用了 "),s("code",[t._v("Flyway")]),t._v(",启用了"),s("code",[t._v("spring.sql.init.mode=always")])]),t._v(" "),s("p",[t._v("在测试目录下的 "),s("code",[t._v("data.sql")]),t._v(" 和 "),s("code",[t._v("schema.sql")]),t._v(" 定义了测试数据库中所需要的数据。\n每次启动都会初始化数据库，如果后续因为测试的需要，只需要更改  "),s("code",[t._v("data.sql")]),t._v(" 和 "),s("code",[t._v("schema.sql")]),t._v("  的数据即可。")]),t._v(" "),s("h4",{attrs:{id:"命令执行测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令执行测试"}},[t._v("#")]),t._v(" 命令执行测试")]),t._v(" "),s("p",[t._v("普通测试")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("mvn "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])])]),s("p",[t._v("覆盖率测试")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("mvn "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" jacoco:repor\n")])])]),s("p",[t._v("该测试会生成代码覆盖率以及分支的检测，报告位置见: "),s("code",[t._v("target/site/jacoco/index.html")])]),t._v(" "),s("p",[t._v("其它帮助文档：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.baeldung.com/jacoco",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.baeldung.com/jacoco"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.baeldung.com/jacoco-report-exclude",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.baeldung.com/jacoco-report-exclude"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);